%%author: Ben Morris and Eric Westerveltfunction [D,C,G,B] = std_dynamics(KE,PE,x,dx, xrel) % all variables must be symbolic when passed, symbolic variables are returned	G=jacobian(PE,x).';	G=simple_elementwise(G); 	tem=jacobian(KE,dx).'; % tem=simple(jacobian(KE,dx).'); 	D=simple_elementwise(jacobian(tem,dx)); %simple(jacobian(tem,dx));	syms C	n=max(size(x));	for k=1:n		for j=1:n			C(k,j)=0;			for i=1:n				C(k,j)=C(k,j)+(1/2)*(diff(D(k,j),x(i)) + diff(D(k,i),x(j)) - diff(D(i,j),x(k)))*dx(i);			end		end	end	C=simple_elementwise(C);%simple(C);        B = jacobian(xrel,x)' ;end% Function to perform simple() one element at a timefunction M = simple_elementwise(M)    for i=1:size(M,1)        for j=1:size(M,2)            M(i,j) = simplify(M(i,j)) ;        end    endend